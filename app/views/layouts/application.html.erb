<!DOCTYPE html>
<html xmlns:fb="">
    <head>
      <title>Social Energy Map</title>

      <%= csrf_meta_tag %>
      
      <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
      
      <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>
      <%= stylesheet_link_tag    "application", :media => "all" %>

    </head>


    <body>

        <h1 id="banner"><%= @page_title || "Social Energy Map" %></h1>
        
        <div id="sidebar">
            <div id="navigation">
              <ul>
                <li>
                    <a style="text-align:center">
                        <fb:login-button autologoutlink="true" onclick = "OnRequestPermission();" perms="user_likes, user_photos, friends_likes, friends_photos, user_location, friends_location, user_hometown, friends_hometown">
                        </fb:login-button>
                    </a>
                </li>
                <li><a href="/">Home</a></li>
                <li><a href="/">About</a></li>
              </ul>
            </div>
        </div>

        
        <div id="fb-root"></div>

        <div id="main-div">
            <%= yield %>
        </div>
        
      <%= javascript_include_tag "application" %> 
      <script src="http://connect.facebook.net/en_US/all.js"></script>

        <script type="text/javascript">

            // Additional JS functions here
            window.fbAsyncInit = function() {
                // init the FB JS SDK
                FB.init({
                    appId      : '169011579889904', // App ID from the App Dashboard
                    channelUrl : 'http://localhost:3000/channel.html', // Channel File for x-domain communication
                    status     : true, // check the login status upon init?
                    cookie     : true, // set sessions cookies to allow your server to access the session?
                    xfbml      : true,  // parse XFBML tags on this page?
                    oauth      : true
                });
                // Additional init code here

                $(document).trigger("onFacebookReady");

                FB.Event.subscribe('auth.logout', function (response) {
                    $("#image_frame").html("");
                    $("#image_frame").append('<br><br/>');
                    $("#image_frame").append("Thank you for using SocialEnergyMap. <br><br/> Visit Again!").css("font-size", "30px");
                    $("#image_frame").append('<br><br/>');

                });
            };

            // Load the SDK Asynchronously
            (function(d){
                var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                ref.parentNode.insertBefore(js, ref);
            }(document));

        </script>

    </body>
</html>